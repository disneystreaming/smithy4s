<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-protocols/definition" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">What is a Protocol? | smithy4s</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://disneystreaming.github.io/smithy4s/docs/protocols/definition"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="What is a Protocol? | smithy4s"><meta data-rh="true" name="description" content="Most definitions of &quot;protocol&quot; you read online say something like, &quot;a set of rules defined for communication on or between computers.&quot; This is a good definition, but it also highlights the issue in understanding this topic: the definition is very broad. Because of this, the word &quot;protocol&quot; is used to refer to different things in different contexts. In this article, we will break down what a protocol is by looking at different types and giving examples. We will then relate things back to Smithy and Smithy4s."><meta data-rh="true" property="og:description" content="Most definitions of &quot;protocol&quot; you read online say something like, &quot;a set of rules defined for communication on or between computers.&quot; This is a good definition, but it also highlights the issue in understanding this topic: the definition is very broad. Because of this, the word &quot;protocol&quot; is used to refer to different things in different contexts. In this article, we will break down what a protocol is by looking at different types and giving examples. We will then relate things back to Smithy and Smithy4s."><link data-rh="true" rel="icon" href="/smithy4s/img/favicon-32x32.png"><link data-rh="true" rel="canonical" href="https://disneystreaming.github.io/smithy4s/docs/protocols/definition"><link data-rh="true" rel="alternate" href="https://disneystreaming.github.io/smithy4s/docs/protocols/definition" hreflang="en"><link data-rh="true" rel="alternate" href="https://disneystreaming.github.io/smithy4s/docs/protocols/definition" hreflang="x-default"><link rel="stylesheet" href="/smithy4s/assets/css/styles.f24ee019.css">
<link rel="preload" href="/smithy4s/assets/js/runtime~main.c76568cd.js" as="script">
<link rel="preload" href="/smithy4s/assets/js/main.41c29cad.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/smithy4s/"><div class="navbar__logo"><img src="/smithy4s/img/logo.svg" alt="Disney Streaming Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/smithy4s/img/logoDark.svg" alt="Disney Streaming Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">smithy4s</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/smithy4s/docs/overview/intro">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/disneystreaming/smithy4s" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discord.gg/wvVga94s8r" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smithy4s/docs/overview/intro">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smithy4s/docs/the-smithy-idl/smithy-idl">The Smithy IDL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/smithy4s/docs/protocols/protocols">Protocols</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/smithy4s/docs/protocols/protocols">Protocols and Smithy4s</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/smithy4s/docs/protocols/definition">What is a Protocol?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/smithy4s/docs/protocols/aws/aws">AWS Protocols</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/smithy4s/docs/protocols/simple-rest-json/overview">SimpleRestJson</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/smithy4s/docs/protocols/compliance-tests">Compliance Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/smithy4s/docs/protocols/deriving-cli">Deriving CLIs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/smithy4s/docs/protocols/protobuf-grpc/protobuf">Protobuf and gRPC</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/smithy4s/docs/protocols/alloy">Alloy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smithy4s/docs/codegen/customisation/packed-inputs">Code generation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smithy4s/docs/design/design">Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smithy4s/docs/guides/dynamic">Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/smithy4s/docs/credits">Credits</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/smithy4s/docs/known-issues">Known Issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/smithy4s/docs/learning-resources">Learning resources</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/smithy4s/docs/02.1-serialisation/serialisation">Serialisation</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/smithy4s/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Protocols</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">What is a Protocol?</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>What is a Protocol?</h1></header><p>Most definitions of &quot;protocol&quot; you read online say something like, &quot;a set of rules defined for communication on or between computers.&quot; This is a good definition, but it also highlights the issue in understanding this topic: the definition is very broad. Because of this, the word &quot;protocol&quot; is used to refer to different things in different contexts. In this article, we will break down what a protocol is by looking at different types and giving examples. We will then relate things back to Smithy and Smithy4s.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tcpip">TCP/IP<a href="#tcpip" class="hash-link" aria-label="Direct link to TCP/IP" title="Direct link to TCP/IP">​</a></h2><p>For starters, let&#x27;s briefly address the protocols that exist at the lower layers of the internet and build from there. TCP/IP is a framework that organizes these various layers and the protocols therein. The layers are usually divided up, from lowest to highest, as follows:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="network-access-layer">Network Access Layer<a href="#network-access-layer" class="hash-link" aria-label="Direct link to Network Access Layer" title="Direct link to Network Access Layer">​</a></h4><p>This layer is used to refer to the hardware that exists to facilitate the connections and protocols at higher levels. In other words, this layer is concerned with the physical transmission of data from one place to another.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="internet-layer">Internet Layer<a href="#internet-layer" class="hash-link" aria-label="Direct link to Internet Layer" title="Direct link to Internet Layer">​</a></h4><p>This layer is mainly composed of the Internet Protocol. The Internet Protocol is what allows identifying and locating hosts on a network. The &quot;IP&quot; in &quot;IPv4&quot; and &quot;IPv6&quot; stands for &quot;Internet Protocol&quot; and those are two respective versions of that protocol.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="transport-layer">Transport Layer<a href="#transport-layer" class="hash-link" aria-label="Direct link to Transport Layer" title="Direct link to Transport Layer">​</a></h4><p>At this point live the TCP and UDP protocols. These protocols take two different approaches to the transferring of messages between two hosts.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="application-layer">Application Layer<a href="#application-layer" class="hash-link" aria-label="Direct link to Application Layer" title="Direct link to Application Layer">​</a></h4><p>Finally, at the top layer we have the protocol that we are all familiar with: http. Other examples of application-layer protocols are FTP, SSH, and SMTP. All of these protocols define their own procedures for interactions between host applications. Essentially, they are adding more structure to interactions that use TCP or UDP underneath. HTTP, for example, uses TCP to facilitate connections.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h4><p>In summary, TCP/IP is a collection of protocols, grouped into layers, that make up the basis for interactions between computers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="http">HTTP<a href="#http" class="hash-link" aria-label="Direct link to HTTP" title="Direct link to HTTP">​</a></h2><p>Before we move on, let&#x27;s make sure we have a common understanding of what HTTP actually is. HTTP stands for HyperText Transfer Protocol. As mentioned above, it builds upon TCP to send messages between two hosts. The most important thing for us to understand here is what HTTP defines and what it does not define.</p><p>HTTP defines semantics for communicating between host applications in a request-response model. We are all likely familiar with making an HTTP request and getting back a response. The most basic example of this is loading a web page on the internet.</p><p>Below is a collection of things that HTTP <strong>DOES</strong> define. Note that we are not going to be exhaustive in our definition of HTTP. The below is just to give an overview.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="request-and-response-headers">Request and Response Headers<a href="#request-and-response-headers" class="hash-link" aria-label="Direct link to Request and Response Headers" title="Direct link to Request and Response Headers">​</a></h4><p>HTTP defines that each request and response may have headers which contain additional information related to the request or response. These are key-value pairs where the key is case-insensitive.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="request-methods">Request Methods<a href="#request-methods" class="hash-link" aria-label="Direct link to Request Methods" title="Direct link to Request Methods">​</a></h4><p>Requests have methods such as <code>GET</code>, <code>PUT</code>, <code>POST</code>, and <code>DELETE</code> (there are currently 9 total). These methods are intended to inform the destination application what the requester wishes to do with a given resource.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="response-status-codes">Response Status Codes<a href="#response-status-codes" class="hash-link" aria-label="Direct link to Response Status Codes" title="Direct link to Response Status Codes">​</a></h4><p>Responses in HTTP come with an integer status code that represents the category of the result of the request. For example a status code between 200 and 299 is used to indicate that a request was successful.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="message-body">Message Body<a href="#message-body" class="hash-link" aria-label="Direct link to Message Body" title="Direct link to Message Body">​</a></h4><p>HTTP defines that requests and responses each have an optional message body. This is usually where the majority of information is contained.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="things-not-defined-in-http">Things NOT Defined in HTTP<a href="#things-not-defined-in-http" class="hash-link" aria-label="Direct link to Things NOT Defined in HTTP" title="Direct link to Things NOT Defined in HTTP">​</a></h4><p>Now that we have covered the basis of what HTTP defines, it is important to call out a few things that it does not define.</p><p>The most major thing left out of the HTTP specification is the format for data in the body of requests and responses. As far as HTTP is concerned, these bodies are just Bytes. Defining what these bodies look like is left to higher-level protocols (as we will discuss below).</p><p>HTTP also does not define what types of resources requests should be able to work with. This means requests can be used to get or modify files stored in a system, in memory state, a third party API, or anything else one could imagine.</p><p>Additionally, although HTTP provides some mechanisms for basic authentication, it does not define anything around authorization. Other protocols, such as OAuth 2.0 are often used with HTTP applications.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rest-vs-http">REST vs HTTP<a href="#rest-vs-http" class="hash-link" aria-label="Direct link to REST vs HTTP" title="Direct link to REST vs HTTP">​</a></h4><p>Here is a quick note about REST since REST is often used interchangeably with HTTP despite the fact that they are two different things. REST stands for Representational State Transfer and is an architectural pattern. It is important to realize that REST is not backed by a strict RFC or other definition for what it means like HTTP is. As such, how the pattern is implemented varies throughout the industry.</p><p>RESTful systems might use HTTP, but they don&#x27;t need to. Similarly, HTTP services may be RESTful, but they don&#x27;t need to be. The two are related, but are not the same and one does not require the other.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-protocols">High Level Protocols<a href="#high-level-protocols" class="hash-link" aria-label="Direct link to High Level Protocols" title="Direct link to High Level Protocols">​</a></h2><p>Here we will discuss several &quot;High Level Protocols.&quot; There isn&#x27;t an official term for these, but we will coin them as such to differentiate them from the protocols discussed above. All of the following protocols build on top of HTTP (although they don&#x27;t have to), but define different semantics on top of it.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="alloysimplerestjson">alloy#simpleRestJson<a href="#alloysimplerestjson" class="hash-link" aria-label="Direct link to alloy#simpleRestJson" title="Direct link to alloy#simpleRestJson">​</a></h4><p>The main protocol that we have defined for use in smithy4s is <code>alloy#simpleRestJson</code>. This protocol uses RESTful HTTP semantics and has HTTP bodies that are encoded as JSON. Essentially, this protocol is building on the various protocols we defined above, and just adding some constraints around how they are used. There are more constraints around how the JSON is encoded and a few other things which you can read about in full in the <a href="https://github.com/disneystreaming/alloy#alloysimplerestjson" target="_blank" rel="noopener noreferrer">alloy documentation</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="grpc">gRPC<a href="#grpc" class="hash-link" aria-label="Direct link to gRPC" title="Direct link to gRPC">​</a></h4><p>gRPC is a framework for remote procedure calls. At the same time, we can consider it to be another protocol that is defined at the same level that <code>alloy#simpleRestJson</code> is defined. gRPC, in its current implementation, uses HTTP version 2 under the hood. It has additional definition around what the HTTP interactions look like such as the bodies being encoded with protocol buffers (protobuf). Additionally, all gRPC messages are sent with the HTTP POST method and use a specific header to specify which remote procedure is being invoked.</p><p>There are quite a few other nuanced requirements for what makes up the gRPC protocol, but hopefully these few have showed you how gRPC builds on what HTTP provides to create a unique interaction pattern.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="aws-protocols">AWS Protocols<a href="#aws-protocols" class="hash-link" aria-label="Direct link to AWS Protocols" title="Direct link to AWS Protocols">​</a></h4><p>AWS themselves have defined quite a few protocols in Smithy. Examples of this range from <code>aws.protocols#restJson1</code> which is very similar to <code>alloy#simpleRestJson</code> to <code>aws.protocols#restXml</code>. You can read more about these protocols in the <a href="https://smithy.io/2.0/aws/protocols/index.html" target="_blank" rel="noopener noreferrer">Smithy documentation</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="protocols-in-smithy">Protocols in Smithy<a href="#protocols-in-smithy" class="hash-link" aria-label="Direct link to Protocols in Smithy" title="Direct link to Protocols in Smithy">​</a></h2><p>In the context of Smithy, a protocol is a set of concrete rules that define how data modelled in Smithy gets transcribed into lower-level semantics. A protocol definition in Smithy can be accompanied by a set of trait annotations which hold further information about how the Smithy shapes are transcribed.</p><p>For example, the <code>alloy#simpleRestJson</code> protocol relies on the <code>smithy.api#http</code> trait annotation to provide information about which HTTP endpoint will map to each Smithy operation shape. Without the <code>smithy.api#http</code> trait, one would not be able to specify the protocol-specific semantics of an API. This is how Smithy, the language itself, is protocol agnostic while still allowing users to define APIs which conform to various protocols.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-define-a-protocol">How to Define a Protocol<a href="#how-to-define-a-protocol" class="hash-link" aria-label="Direct link to How to Define a Protocol" title="Direct link to How to Define a Protocol">​</a></h4><p>Protocols can be defined in Smithy as traits that are marked with the <code>@protocolDefinition</code> <a href="https://smithy.io/2.0/spec/protocol-traits.html#protocoldefinition-trait" target="_blank" rel="noopener noreferrer">trait</a>. For example, the (slightly simplified) definition of <code>alloy#simpleRestJson</code> looks like:</p><div class="language-smithy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-smithy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">namespace alloy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@protocolDefinition()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@trait(selector: &quot;service&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">structure simpleRestJson {}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This then allows you to annotate service shapes with the protocol. Although the protocol is defined in Smithy like this, the exact meaning of the protocol is defined elsewhere in documentation and more importantly in interpreters that implement the protocol (such as the interpreters that smithy4s uses to create http4s applications). Additionally, protocol definitions typically come with test cases, also <a href="https://smithy.io/2.0/additional-specs/http-protocol-compliance-tests.html" target="_blank" rel="noopener noreferrer">defined in Smithy</a>, which help to define the specific semantics of the protocol.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2><p>Hopefully, this article has helped to outline what a protocol is and more specifically what layers of protocols we are building upon to create something like the <code>alloy#simpleRestJson</code> protocol. If you have any more questions about protocols, especially the protocols we have defined and use in Smithy4s, don&#x27;t hesitate to reach out.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/disneystreaming/smithy4s/edit/main/modules/docs/src/03-protocols/02-definition.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/smithy4s/docs/protocols/protocols"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Protocols and Smithy4s</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/smithy4s/docs/protocols/aws/aws"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">AWS</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tcpip" class="table-of-contents__link toc-highlight">TCP/IP</a></li><li><a href="#http" class="table-of-contents__link toc-highlight">HTTP</a></li><li><a href="#high-level-protocols" class="table-of-contents__link toc-highlight">High Level Protocols</a></li><li><a href="#protocols-in-smithy" class="table-of-contents__link toc-highlight">Protocols in Smithy</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/smithy4s/docs/overview/intro">Get Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/disneystreaming/smithy4s" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Special thanks</div><ul class="footer__items clean-list"><li class="footer__item">
                    <a href="https://www.yourkit.com/" target="_blank" rel="noreferrer noopener" aria-label="Profiled with yourkit">
                      <img src="https://www.yourkit.com/images/yk_logo.svg" alt="Profiled with yourkit">
                    </a>
                  </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Disney Streaming</div></div></div></footer></div>
<script src="/smithy4s/assets/js/runtime~main.c76568cd.js"></script>
<script src="/smithy4s/assets/js/main.41c29cad.js"></script>
</body>
</html>